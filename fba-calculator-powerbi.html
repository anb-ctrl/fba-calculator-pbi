<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBA Fee Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: 'Segoe UI', system-ui, sans-serif; }
        input[type="number"], select { 
            border: 1px solid #d1d5db; 
            border-radius: 6px; 
            padding: 6px 10px;
            width: 100%;
            font-size: 13px;
        }
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        .result-row { 
            display: flex; 
            justify-content: space-between; 
            padding: 6px 0; 
            border-bottom: 1px solid #f3f4f6;
            font-size: 13px;
        }
        .result-row:last-child { border-bottom: none; }
        .highlight { background: #eff6ff; margin: 0 -12px; padding: 8px 12px; border-radius: 6px; font-weight: 600; }
        .section { background: white; border-radius: 10px; padding: 16px; margin-bottom: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .section-title { font-weight: 600; font-size: 14px; margin-bottom: 12px; color: #1f2937; }
        .metric-box { background: rgba(255,255,255,0.2); border-radius: 8px; padding: 12px; text-align: center; }
        .metric-value { font-size: 22px; font-weight: 700; color: white; }
        .metric-label { font-size: 11px; color: rgba(255,255,255,0.85); }
        .input-group { margin-bottom: 10px; }
        .input-label { font-size: 12px; color: #6b7280; margin-bottom: 3px; display: block; }
        .checkbox-label { display: flex; align-items: center; gap: 8px; font-size: 12px; color: #374151; cursor: pointer; margin-bottom: 6px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .size-tier-badge { 
            display: inline-block; 
            background: #dbeafe; 
            color: #1e40af; 
            padding: 2px 8px; 
            border-radius: 4px; 
            font-size: 11px; 
            font-weight: 600; 
        }
        .negative { color: #dc2626; }
        .subtext { font-size: 10px; color: #9ca3af; }
    </style>
</head>
<body class="bg-gray-100 p-3">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-4">
            <h1 class="text-xl font-bold text-gray-800">Amazon FBA Fee Calculator</h1>
            <p class="text-xs text-gray-500">2025/2026 Fee Structure</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            <!-- Left Column - Inputs -->
            <div>
                <!-- Pricing -->
                <div class="section">
                    <div class="section-title">üí∞ Pricing & Costs</div>
                    <div class="grid-2">
                        <div class="input-group">
                            <label class="input-label">Selling Price ($)</label>
                            <input type="number" id="sellingPrice" value="30" step="0.01" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Product Cost ($)</label>
                            <input type="number" id="productCost" value="10" step="0.01" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Inbound Shipping ($/unit)</label>
                            <input type="number" id="inboundShipping" value="1" step="0.01" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Advertising ($/unit)</label>
                            <input type="number" id="advertisingCost" value="0" step="0.01" min="0" onchange="calculate()">
                        </div>
                    </div>
                </div>

                <!-- Dimensions -->
                <div class="section">
                    <div class="section-title">üì¶ Product Dimensions</div>
                    <div class="grid-2">
                        <div class="input-group">
                            <label class="input-label">Length (in)</label>
                            <input type="number" id="length" value="10" step="0.1" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Width (in)</label>
                            <input type="number" id="width" value="8" step="0.1" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Height (in)</label>
                            <input type="number" id="height" value="4" step="0.1" min="0" onchange="calculate()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Weight (lb)</label>
                            <input type="number" id="weight" value="1" step="0.01" min="0" onchange="calculate()">
                        </div>
                    </div>
                    <div class="mt-3 p-2 bg-gray-50 rounded-lg text-xs">
                        <div class="grid-2 gap-1">
                            <div><span class="text-gray-500">Cubic Ft:</span> <span id="cubicFeet" class="font-mono">0.19</span></div>
                            <div><span class="text-gray-500">Dim Wt:</span> <span id="dimWeight" class="font-mono">2.30</span> lb</div>
                            <div><span class="text-gray-500">Ship Wt:</span> <span id="shippingWeight" class="font-mono">2.30</span> lb</div>
                            <div><span class="text-gray-500">Tier:</span> <span id="sizeTier" class="size-tier-badge">Large Standard</span></div>
                        </div>
                    </div>
                </div>

                <!-- Category & Options -->
                <div class="section">
                    <div class="section-title">‚öôÔ∏è Category & Options</div>
                    <div class="input-group">
                        <label class="input-label">Product Category</label>
                        <select id="category" onchange="calculate()">
                            <option value="general">General Products (15%)</option>
                            <option value="electronics">Electronics (8%)</option>
                            <option value="computers">Computers (8%)</option>
                            <option value="videogames">Video Games (15%)</option>
                            <option value="books">Books (15%)</option>
                            <option value="jewelry">Jewelry (20%)</option>
                            <option value="watches">Watches (15%)</option>
                            <option value="clothing">Clothing & Accessories (17%)</option>
                            <option value="shoes">Shoes, Handbags (15%)</option>
                            <option value="beauty">Beauty & Personal Care (15%)</option>
                            <option value="health">Health & Household (15%)</option>
                            <option value="toys">Toys & Games (15%)</option>
                            <option value="sports">Sports & Outdoors (15%)</option>
                            <option value="automotive">Automotive (12%)</option>
                            <option value="home">Home & Kitchen (15%)</option>
                            <option value="tools">Tools & Home Improvement (15%)</option>
                            <option value="pet">Pet Supplies (15%)</option>
                            <option value="baby">Baby Products (15%)</option>
                            <option value="office">Office Products (15%)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Months in Storage: <span id="monthsDisplay" class="font-semibold text-blue-600">2</span></label>
                        <input type="range" id="monthsInStorage" value="2" min="0" max="18" class="w-full" onchange="updateMonths(); calculate()">
                    </div>
                    <div class="mt-2">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isApparel" onchange="calculate()"> Apparel Item (+$0.40)
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="isDangerousGoods" onchange="calculate()"> Dangerous Goods (+$0.15)
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="isPeakSeason" onchange="calculate()"> Peak Season (Oct 15 - Jan 14)
                        </label>
                    </div>
                </div>
            </div>

            <!-- Right Column - Results -->
            <div>
                <!-- Profit Summary -->
                <div class="section p-4" id="profitSection" style="background: linear-gradient(135deg, #10b981, #059669);">
                    <div class="text-white font-semibold text-sm mb-3">Profit Summary</div>
                    <div class="grid-2 gap-2">
                        <div class="metric-box">
                            <div class="metric-value" id="profit">$6.35</div>
                            <div class="metric-label">Net Profit</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-value" id="profitMargin">21.2%</div>
                            <div class="metric-label">Margin</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-value" id="roi">63.5%</div>
                            <div class="metric-label">ROI</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-value" id="breakeven">$23.65</div>
                            <div class="metric-label">Breakeven</div>
                        </div>
                    </div>
                </div>

                <!-- Amazon Fees -->
                <div class="section">
                    <div class="section-title">üìä Amazon Fees</div>
                    <div class="result-row">
                        <div>Referral Fee <span class="subtext" id="referralSubtext">(15%)</span></div>
                        <div class="font-mono" id="referralFee">$4.50</div>
                    </div>
                    <div class="result-row">
                        <div>Fulfillment Fee <span class="subtext" id="fulfillmentSubtext">(Large Standard)</span></div>
                        <div class="font-mono" id="fulfillmentFee">$3.31</div>
                    </div>
                    <div class="result-row" id="lowPriceRow" style="display: none;">
                        <div>Low-Price Discount <span class="subtext">(under $10)</span></div>
                        <div class="font-mono text-green-600" id="lowPriceDiscount">-$0.77</div>
                    </div>
                    <div class="result-row">
                        <div>Storage Fee <span class="subtext" id="storageSubtext">(2 months)</span></div>
                        <div class="font-mono" id="storageFee">$0.30</div>
                    </div>
                    <div class="result-row" id="agedRow" style="display: none;">
                        <div>Aged Inventory Surcharge <span class="subtext">(180+ days)</span></div>
                        <div class="font-mono negative" id="agedSurcharge">$0.00</div>
                    </div>
                    <div class="result-row highlight">
                        <div>Total Amazon Fees</div>
                        <div class="font-mono" id="totalAmazonFees">$8.11</div>
                    </div>
                </div>

                <!-- Total Costs -->
                <div class="section">
                    <div class="section-title">üíµ Total Costs</div>
                    <div class="result-row">
                        <div>Product Cost</div>
                        <div class="font-mono" id="productCostDisplay">$10.00</div>
                    </div>
                    <div class="result-row">
                        <div>Inbound Shipping</div>
                        <div class="font-mono" id="inboundDisplay">$1.00</div>
                    </div>
                    <div class="result-row">
                        <div>Advertising</div>
                        <div class="font-mono" id="advertisingDisplay">$0.00</div>
                    </div>
                    <div class="result-row">
                        <div>Amazon Fees</div>
                        <div class="font-mono" id="amazonFeesDisplay">$8.11</div>
                    </div>
                    <div class="result-row highlight">
                        <div>Total Cost</div>
                        <div class="font-mono" id="totalCost">$19.11</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const categories = {
            general: 0.15, electronics: 0.08, computers: 0.08, videogames: 0.15,
            books: 0.15, jewelry: 0.20, watches: 0.15, clothing: 0.17,
            shoes: 0.15, beauty: 0.15, health: 0.15, toys: 0.15,
            sports: 0.15, automotive: 0.12, home: 0.15, tools: 0.15,
            pet: 0.15, baby: 0.15, office: 0.15
        };

        function updateMonths() {
            document.getElementById('monthsDisplay').textContent = document.getElementById('monthsInStorage').value;
        }

        function calculate() {
            const sellingPrice = parseFloat(document.getElementById('sellingPrice').value) || 0;
            const productCost = parseFloat(document.getElementById('productCost').value) || 0;
            const length = parseFloat(document.getElementById('length').value) || 0;
            const width = parseFloat(document.getElementById('width').value) || 0;
            const height = parseFloat(document.getElementById('height').value) || 0;
            const weight = parseFloat(document.getElementById('weight').value) || 0;
            const category = document.getElementById('category').value;
            const isApparel = document.getElementById('isApparel').checked;
            const isDangerousGoods = document.getElementById('isDangerousGoods').checked;
            const isPeakSeason = document.getElementById('isPeakSeason').checked;
            const monthsInStorage = parseInt(document.getElementById('monthsInStorage').value) || 0;
            const inboundShipping = parseFloat(document.getElementById('inboundShipping').value) || 0;
            const advertisingCost = parseFloat(document.getElementById('advertisingCost').value) || 0;

            // Size calculations
            const dims = [length, width, height].sort((a, b) => a - b);
            const longestSide = dims[2], medianSide = dims[1], shortestSide = dims[0];
            const lengthGirth = longestSide + (2 * medianSide) + (2 * shortestSide);
            const cubicFeet = (length * width * height) / 1728;
            const dimWeight = (length * width * height) / 139;
            const shippingWeight = Math.max(weight, dimWeight);

            // Size tier
            let sizeTier = '', isOversize = false;
            if (weight <= 0.9375 && longestSide <= 15 && medianSide <= 12 && shortestSide <= 0.75) {
                sizeTier = 'Small Standard';
            } else if (weight <= 20 && longestSide <= 18 && medianSide <= 14 && shortestSide <= 8) {
                sizeTier = 'Large Standard';
            } else if (lengthGirth <= 130 && weight <= 50 && longestSide <= 59) {
                sizeTier = 'Large Bulky'; isOversize = true;
            } else if (lengthGirth <= 165 && weight <= 150 && longestSide <= 108) {
                sizeTier = 'Extra-Large'; isOversize = true;
            } else {
                sizeTier = 'Extra-Large 150+'; isOversize = true;
            }

            // Fulfillment fee
            let fulfillmentFee = 0;
            if (sizeTier === 'Small Standard') {
                if (weight <= 0.25) fulfillmentFee = 2.50;
                else if (weight <= 0.5) fulfillmentFee = 2.63;
                else if (weight <= 0.75) fulfillmentFee = 2.81;
                else fulfillmentFee = 3.00;
            } else if (sizeTier === 'Large Standard') {
                if (weight <= 0.25) fulfillmentFee = 3.06;
                else if (weight <= 0.5) fulfillmentFee = 3.15;
                else if (weight <= 0.75) fulfillmentFee = 3.21;
                else if (weight <= 1) fulfillmentFee = 3.31;
                else if (weight <= 1.5) fulfillmentFee = 4.13;
                else if (weight <= 2) fulfillmentFee = 4.37;
                else if (weight <= 2.5) fulfillmentFee = 4.69;
                else if (weight <= 3) fulfillmentFee = 5.04;
                else fulfillmentFee = 5.04 + (Math.ceil(weight - 3) * 0.32);
            } else if (sizeTier === 'Large Bulky') {
                fulfillmentFee = 9.61 + (Math.max(0, shippingWeight - 1) * 0.38);
            } else {
                if (shippingWeight <= 50) fulfillmentFee = 26.33 + (Math.max(0, shippingWeight - 1) * 0.38);
                else if (shippingWeight <= 70) fulfillmentFee = 40.12 + (Math.max(0, shippingWeight - 51) * 0.75);
                else if (shippingWeight <= 150) fulfillmentFee = 54.81 + (Math.max(0, shippingWeight - 71) * 0.75);
                else fulfillmentFee = 194.95 + (Math.max(0, shippingWeight - 151) * 0.19);
            }

            if (isApparel && !isOversize) fulfillmentFee += 0.40;
            if (isDangerousGoods) fulfillmentFee += 0.15;

            const lowPriceDiscount = sellingPrice < 10 ? 0.77 : 0;
            fulfillmentFee = Math.max(0, fulfillmentFee - lowPriceDiscount);

            if (isPeakSeason && !isOversize) {
                if (sizeTier === 'Small Standard') fulfillmentFee += 0.24;
                else if (sizeTier === 'Large Standard') fulfillmentFee += 0.32;
            }

            // Referral fee
            const referralRate = categories[category];
            const referralFee = Math.max(sellingPrice * referralRate, 0.30);

            // Storage fee
            const offPeakRate = isOversize ? 0.53 : 0.78;
            const peakRate = isOversize ? 1.40 : 2.40;
            const storageRate = isPeakSeason ? peakRate : offPeakRate;
            const monthlyStorage = cubicFeet * storageRate;
            const totalStorage = monthlyStorage * monthsInStorage;

            // Aged surcharge
            let agedSurcharge = 0;
            const daysInStorage = monthsInStorage * 30;
            if (daysInStorage > 365) agedSurcharge = Math.max(cubicFeet * 6.90, 0.15);
            else if (daysInStorage > 330) agedSurcharge = cubicFeet * 4.20;
            else if (daysInStorage > 270) agedSurcharge = cubicFeet * 3.80;
            else if (daysInStorage > 180) agedSurcharge = cubicFeet * 1.50;

            // Totals
            const totalAmazonFees = fulfillmentFee + referralFee + totalStorage + agedSurcharge;
            const totalCosts = productCost + inboundShipping + advertisingCost + totalAmazonFees;
            const profit = sellingPrice - totalCosts;
            const profitMargin = sellingPrice > 0 ? (profit / sellingPrice) * 100 : 0;
            const roi = productCost > 0 ? (profit / productCost) * 100 : 0;

            // Update display
            document.getElementById('cubicFeet').textContent = cubicFeet.toFixed(3);
            document.getElementById('dimWeight').textContent = dimWeight.toFixed(2);
            document.getElementById('shippingWeight').textContent = shippingWeight.toFixed(2);
            document.getElementById('sizeTier').textContent = sizeTier;

            document.getElementById('referralFee').textContent = '$' + referralFee.toFixed(2);
            document.getElementById('referralSubtext').textContent = '(' + (referralRate * 100) + '%)';
            document.getElementById('fulfillmentFee').textContent = '$' + fulfillmentFee.toFixed(2);
            document.getElementById('fulfillmentSubtext').textContent = '(' + sizeTier + ')';
            
            document.getElementById('lowPriceRow').style.display = lowPriceDiscount > 0 ? 'flex' : 'none';
            document.getElementById('lowPriceDiscount').textContent = '-$' + lowPriceDiscount.toFixed(2);

            document.getElementById('storageFee').textContent = '$' + totalStorage.toFixed(2);
            document.getElementById('storageSubtext').textContent = '(' + monthsInStorage + ' months)';

            document.getElementById('agedRow').style.display = agedSurcharge > 0 ? 'flex' : 'none';
            document.getElementById('agedSurcharge').textContent = '$' + agedSurcharge.toFixed(2);

            document.getElementById('totalAmazonFees').textContent = '$' + totalAmazonFees.toFixed(2);

            document.getElementById('productCostDisplay').textContent = '$' + productCost.toFixed(2);
            document.getElementById('inboundDisplay').textContent = '$' + inboundShipping.toFixed(2);
            document.getElementById('advertisingDisplay').textContent = '$' + advertisingCost.toFixed(2);
            document.getElementById('amazonFeesDisplay').textContent = '$' + totalAmazonFees.toFixed(2);
            document.getElementById('totalCost').textContent = '$' + totalCosts.toFixed(2);

            document.getElementById('profit').textContent = '$' + profit.toFixed(2);
            document.getElementById('profitMargin').textContent = profitMargin.toFixed(1) + '%';
            document.getElementById('roi').textContent = roi.toFixed(1) + '%';
            document.getElementById('breakeven').textContent = '$' + totalCosts.toFixed(2);

            // Update profit section color
            const profitSection = document.getElementById('profitSection');
            if (profit >= 0) {
                profitSection.style.background = 'linear-gradient(135deg, #10b981, #059669)';
            } else {
                profitSection.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
            }
        }

        // Initial calculation
        calculate();
    </script>
</body>
</html>
